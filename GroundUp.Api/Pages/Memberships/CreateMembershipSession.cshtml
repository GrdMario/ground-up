@page
@model GroundUp.Api.Pages.Memberships.CreateMembershipSessionModel
@{
}
<div style="max-width: 800px; margin: auto">
    @if (Model.Members.Count == 0)
    {
        <div class="card">
            <div class="py-4 border-bottom">
                <h4 class="text-center">
                    No members with active memberships found for:
                    <br />
                    <strong>From.ToShortDateString()</strong>
                </h4>
            </div>

            <div class="d-flex flex-row justify-content-center py-4">
                <a asp-page="/Index" class="btn btn-outline-primary">Return to calendar</a>
            </div>
        </div>
    }

    @if (Model.Members.Count > 0)
    {
        <form method="post" asp-page-handler="Update">
            <div class="card">

                <div class="py-4 border-bottom">
                    <h4 class="text-center">
                        No members with active memberships found for:
                        <br />
                        <strong>@Model.From.ToShortDateString()</strong>
                    </h4>
                </div>

                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <input asp-for="Year" type="hidden" />
                <input asp-for="Month" type="hidden" />
                <input asp-for="Day" type="hidden" />
                <input asp-for="Hour" type="hidden" />
                
                <div class="p-4 border-bottom">
                    <div class="row mb-2 mt-2">
                        <div class="form-group col-md-12">
                            <label for="Create.MembershipId" class="my-2">Select client</label>
                            <select asp-for="Create.MembershipId" asp-items="@Model.Members" class="form-select" aria-label="Default select example">
                                <option value="">-- Select --</option>
                            </select>
                            <div>
                                <span asp-validation-for="Create.MembershipId" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Create.Start" class="my-2">Start</label>
                                <input asp-for="Create.Start" id="Create.Start" class="form-control" type="datetime-local" readonly/>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Create.End" class="my-2">End</label>
                                <input asp-for="Create.End" id="Create.End" class="form-control" type="datetime-local" readonly />
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="Create.Comment" class="mb-2">Comment</label>
                                <textarea asp-for="Create.Comment" id="Create.Comment" class="form-control" rows="6"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-4">
                    <div class="col-md-2 offset-10">
                        <button type="submit" style="width: 100%" class="btn btn-outline-primary">Save</button>
                    </div>
                </div>
            </div>
        </form>
    }
</div>
